<header class="site-header">
  <div class="container site-header__inner">
    <a class="brand" href="{{ .Site.Home.RelPermalink }}">
      <span class="brand__mark">VL</span>
      <span class="brand__text">
        <span class="brand__title">Vertäfelungen.de</span>
        <span class="brand__subtitle">Massgeschneiderte Lambris &amp; Paneele</span>
      </span>
    </a>

    <div class="nav-wrap" role="navigation" aria-label="Hauptmenü">
      <nav class="main-nav">
        {{ $current := .RelPermalink }}
        {{ range .Site.Menus.main }}
          <a class="main-nav__link{{ if eq $current .URL }} main-nav__link--active{{ end }}" href="{{ .URL }}">{{ .Name }}</a>
        {{ end }}
      </nav>

      <div class="header-actions">
        <div class="lang-switch" aria-label="Sprachumschaltung">
          {{ range $index, $site := .Sites }}
            {{ $isActive := eq $site.Language.Lang $.Site.Language.Lang }}
            <a class="{{ if $isActive }}is-active{{ end }}" href="{{ $site.Home.RelPermalink }}">{{ upper $site.Language.Lang }}</a>{{ if lt (add $index 1) (len $.Sites) }}<span aria-hidden="true">·</span>{{ end }}
          {{ end }}
        </div>
        {{ $productSection := cond (eq .Site.Language.Lang "de") "produkte" "products" }}
        {{ $productLink := printf "/%s/%s/" .Site.Language.Lang $productSection | relURL }}
        {{ with site.GetPage (printf "/%s/%s" .Site.Language.Lang $productSection) }}
          {{ $productLink = .RelPermalink }}
        {{ end }}
        {{ $faqLink := printf "/%s/faq/" .Site.Language.Lang | relURL }}
        {{ with site.GetPage (printf "/%s/faq" .Site.Language.Lang) }}
          {{ $faqLink = .RelPermalink }}
        {{ end }}
        {{ $productLabel := cond (eq .Site.Language.Lang "de") "Produkte" "Products" }}
        <a class="button button--filled" href="{{ $productLink }}">{{ $productLabel }}</a>
        <a class="button" href="{{ $faqLink }}">FAQ</a>
      </div>
    </div>
  </div>
</header>
